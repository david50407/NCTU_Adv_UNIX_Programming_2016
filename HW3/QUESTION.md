# Homework #3
## Advanced Programming in the UNIX Environment

Due: May 9, 2016

---

# Simple Shell

In this homework, we are going to practice process relationships, descriptors, signals, and simple IPC with pipes. Please implement a simple shell that fulfills the following requirements:

1. [basic] Execute a single command.
2. [basic] Properly block or unblock signals.
3. [basic] Replace standard input/output of a process using the redirection operators (`<` and `>`).
4. [basic] Setup foreground process group and background process groups.
5. [basic] Create pipeline for commands separated by the pipe operator (`|`), and put the commands into the same process group.
6. [optional] Manipulate environment variables: provide commands like `export` and `unset` to add and remove environment variables, respectively.
7. [optional] Expand of the `*` and `?` operators.
8. [optional] Job control: support process suspension using `Ctrl-Z`, and `fg` and `bg` command.

Please note that we have basic requirements and optional requirements. You will get a higher score if you have implemented all the requirements.

## Homework Submission

Please pack your files into a single `ZIP` archive and submit your homework via the E3 system. Please also provide a `Makefile` (used for compiling and linking your codes) and a `README` file (indicating what features you have implemented).

## Sample Test Cases

Here are some sample test cases for you to ensure that your codes has properly implemented. You should be able to see the correct output if you pass the test cases, or your program might be crashed, stopped, or suspended.

### Execute a single command:

```
shell-prompt$ ls -la
```

### Properly block or unblock signals: Sending SIGINT or SIGQUIT should not terminate the current running shell.

```
shell-prompt$ sleep 10
```

Run the above command and send signals like SIGINT or SIGQUIT to the correct process (before the process terminates). Note, this test may only work if you have already properly set the foreground process group.

### Replace standard output of a process

```
shell-prompt$ ls -la > /tmp/x
```

You will be not able to see the output, but the output is written to the file /tmp/x.

### Replace standard input of a process

```
shell-prompt$ cat < /etc/passwd
```

### Setup foreground process group and background process groups

```
shell-prompt$ less /etc/passwd
```

### Create pipelines

```
shell-prompt$ cat /etc/passwd | cat | less
```

### Put processes into the same process group

```
shell-prompt$ ps -o pid,sid,pgid,ppid,cmd | cat | cat | tr A-Z a-z
```

Processes generated by a single command should be in the same process group.

### Manipulate environment variables

You can use the relevant commands to add and remove environment variables and then use the `printenv` command to list all the available environment variables.

### Expand * and ? characters

```
shell-prompt$ ls *
```

If you see an error message like `ls: cannot access *: No such file or directory`, you did not properly implement the filename expansion feature.

### Job control

You should be able to put a process (or a group of processes) into background if an & operator is appended to a command.
You should also implement `fg` and `bg` command to change the current foreground process group and continue the execution of a stopped process group.
